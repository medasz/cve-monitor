package config

import (
	"log"

	"gopkg.in/ini.v1"
)

type MysqlConfig struct {
	Host     string `ini:"host"`
	Port     string `ini:"port"`
	Dbname   string `ini:"dbname"`
	Username string `ini:"username"`
	Password string `ini:"password"`
}
type Token struct {
	Secret     string `ini:"secret"`
	AppId      string `ini:"appId"`
	TemplateId string `ini:"templateId"`
}

var Config *MysqlConfig
var WeChat *Token

func init() {
	Config = new(MysqlConfig)
	WeChat = new(Token)
	cfg, err := ini.Load("config.ini")
	if err != nil {
		panic(err)
	}
	if err := cfg.Section("mysql").MapTo(Config); err != nil {
		panic(err)
	}
	if err := cfg.Section("wechat").MapTo(WeChat); err != nil {
		panic(err)
	}
	log.Println("配置文件加载成功")
}
